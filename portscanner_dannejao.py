#!/usr/bin/python3

import sys
import socket
import pyfiglet
import threading
import time

def spinner():
    while not stop_spinner:
        for symbol in '|/-\\':
            sys.stdout.write('\r' + 'Scanning ' + symbol)
            sys.stdout.flush()
            time.sleep(0.1)

ascii_banner = pyfiglet.figlet_format("Dannejao\nPort Scanner")
print(ascii_banner)

ip = input("Skriv in adressen du vill scanna: \n")
start_port = int(input("Skriv in start port för ditt range: \n"))
end_port = int(input("Skriv in slut porten för ditt range: \n"))

open_ports = []
#ports = range(1, 10000)
ports = range(start_port, end_port + 1)

def probe_port(ip, port):
    try:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.settimeout(0.5)
        r = sock.connect_ex((ip, port))
        if r == 0:
            open_ports.append(port)
        sock.close()
    except Exception as e:
        pass

stop_spinner = False
spinner_thread = threading.Thread(target=spinner)
spinner_thread.start()

for port in ports:
    probe_port(ip, port)

stop_spinner = True
spinner_thread.join()

sys.stdout.write('\r' + 'Scanning Completed.       \n')

if open_ports:
    print("\nOpen Ports are: ")
    print(sorted(open_ports))
else:
    print("\nLooks like no ports are open.")
